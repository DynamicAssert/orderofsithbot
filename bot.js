const express = require("express");
const port = 3000;
const noblox = require("noblox.js");
const app = express();
const groupID = 2931379;
const key = "DO_NOT_SHARE_THIS_KEY_IT_ALLOWS_PEOPLE_TO_TAKE_ADVANTAGE_OF_BOT_MODERATION_FEATURES_35623162625409672457854029728547829457249754272495878457984randomletterspeopleprobablywonteverguess464363456n5426i2456un2453g6i4256jng456j453gn62435j6gnjg62643hngjhgn62hjngjh6njh";

async function run() {
	await noblox.setCookie("_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_C14D5DD10F481238E00C36BAF503E6BBFA18901524662AB7E1A8FE977B150437534417F1203ACA9049DD2909BD7781685B99E470A14C9FD221C30E97D9F4345570EA74AC8925988A223D6F008B293D0D9582A1589046C99286CEE6BE5FC11F8EE604E6D84E958A3105C9E42177969C30990C80BA2A72EA309D89D9BF1BFC08220C653887C2F4926A44032AB67D1B4DB51D9347FBA1F2AAB9F4E77A11C373FC394B0EA5C15647AEC78CB34480197499916B0FD1188F77D3D2BA15D879871D7F29B2F2A7EE98DCB1DB38B6F177F704D5C7AF4E68BE050E239455058BBFD608E1651CA469AC0D346F06569100D6AB8B6C89110D3FD9E22503C9B40A9A8A0834A70AC7DD43DD1437784FE7B495889141DF2FA952413CF05E9824BEDF8D8337427E39E5C0AF6A");
}

run();
app.get("/promote", (req, res) => {
	var headerKey = req.headers.key;
	var userPromote = req.headers.userid;
	if (headerKey != key) {
		res.send(403); //Forbidden, you need a key for this
		return;
	}
	console.log(`KEY: ${headerKey}`);
	noblox.promote(Number(groupID), Number(userPromote)).then(result => {
		res.send(result);
	});
})

app.listen(port, () => {
	console.log(`Bot listening on localhost:${port}`);
});
