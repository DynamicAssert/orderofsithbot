const express = require("express");
const port = 7777;
const noblox = require("noblox.js");
const app = express();
const groupID = 2931379;
const key = "DO_NOT_SHARE_THIS_KEY_IT_ALLOWS_PEOPLE_TO_TAKE_ADVANTAGE_OF_BOT_MODERATION_FEATURES_35623162625409672457854029728547829457249754272495878457984randomletterspeopleprobablywonteverguess464363456n5426i2456un2453g6i4256jng456j453gn62435j6gnjg62643hngjhgn62hjngjh6njh";

async function run() {
	await noblox.setCookie("_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_447BDAEF3205ACDABFC8382FFF01BB5894A0B21FE55D8B52256486504A1D8B82B44849332D193E68AAE18B3EC0F2C5683D969441F3EB83DE124E489D0E373C350762CF9635DE1FC99D985589B90AD9D9EE5279252EFD543DBDB6D71B973B6F226C6BE6C1E037461B7D69BCC53050C314B8DE8A4FED8C6AF328C8A3095CE5CE992786D3AD17245C9A208990A9E250EBD578AEDB55F3F3A8B991947C3F4B37C99AC880367D6D7E244BBDC73811D0EFA1AC88AE874787EBC3E70D8D9FC8126915550BD7D67C4166585A67AE87571D3B80ADC5FAD28B6A0ABAD3E9174C909BF060547222FDBE4580BF3078BF2E8E22FD53B8FA65E452B85192B34B9B6A6D8FD2217DAAF8F7A78A9AE31C5AF51D03CE811269ABDF491415B0C0DB8EDB9D3D41E075A51F090177");
}

run();
app.get("/promote", (req, res) => {
	var headerKey = req.headers.key;
	var userPromote = req.headers.userId;
	if (headerKey != key) {
		res.send(403); //Forbidden, you need a key for this
		return;
	}
	console.log(`KEY: ${headerKey}`);
	noblox.promote(Number(groupID), Number(userPromote)).then(result => {
		res.send(result);
	});
})

app.listen(port, () => {
	console.log(`Bot listening on localhost:${port}`);
});